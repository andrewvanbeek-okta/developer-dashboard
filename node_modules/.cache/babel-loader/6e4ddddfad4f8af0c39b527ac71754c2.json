{"remainingRequest":"/Users/andrewvanbeek/okta/dev-dash/node_modules/babel-loader/lib/index.js!/Users/andrewvanbeek/okta/dev-dash/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/andrewvanbeek/okta/dev-dash/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andrewvanbeek/okta/dev-dash/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andrewvanbeek/okta/dev-dash/src/views/Developer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andrewvanbeek/okta/dev-dash/src/views/Developer.vue","mtime":1592526193793},{"path":"/Users/andrewvanbeek/okta/dev-dash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andrewvanbeek/okta/dev-dash/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/andrewvanbeek/okta/dev-dash/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/andrewvanbeek/okta/dev-dash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/andrewvanbeek/okta/dev-dash/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/andrewvanbeek/okta/dev-dash/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  client_name: \"Developer\",\n  data: function data() {\n    return {\n      show1: false,\n      dialog: false,\n      new_client_name: \"\",\n      policy_url: \"\",\n      terms_url: \"\",\n      okta_issuer: \"\",\n      userField: false,\n      baseEncode: \"\",\n      user_scopes: \"openid email profile\",\n      items: [{\n        consent: \"IMPLICIT\",\n        default: false,\n        description: null,\n        id: \"scpjeez3czmycNAvE0h7\",\n        metadataPublish: \"NO_CLIENTS\",\n        name: \"Admin\",\n        system: false\n      }],\n      clientCredsScopes: \"\",\n      user: \"\",\n      headers: [{\n        text: 'Oauth Clients',\n        align: 'start',\n        sortable: false,\n        value: 'client_name'\n      }, {\n        text: 'client_id',\n        value: 'client_id'\n      }, {\n        text: 'Actions',\n        value: 'action',\n        sortable: false\n      }],\n      clients: [],\n      editedIndex: -1,\n      viewedItem: {\n        client_name: '',\n        client_id: 0,\n        client_secret: 0\n      },\n      defaultItem: {\n        client_name: '',\n        client_id: 0\n      }\n    };\n  },\n  computed: {\n    formTitle: function formTitle() {\n      return this.editedIndex === -1 ? 'New Oauth App' : 'View Oauth Client';\n    }\n  },\n  watch: {\n    dialog: function dialog(val) {\n      val || this.close();\n    }\n  },\n  created: function created() {\n    this.initialize();\n    console.log(process.env.VUE_APP_OKTA_ISSUER);\n    this.okta_issuer = process.env.VUE_APP_OKTA_ISSUER;\n  },\n  methods: {\n    initialize: function () {\n      var _initialize = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var component, user, accessToken, accessTokenobj, baseURI;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                component = this;\n                _context.next = 3;\n                return this.$auth.getUser();\n\n              case 3:\n                user = _context.sent;\n                _context.next = 6;\n                return this.$auth.getAccessToken();\n\n              case 6:\n                accessToken = _context.sent;\n                accessTokenobj = {\n                  accessToken: accessToken\n                };\n                this.user = user.preferred_username;\n                baseURI = \"http://localhost:8000/developer-apps?user=\" + user.preferred_username;\n                this.$http.get(baseURI, {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  }\n                }).then(function (result) {\n                  _this.clients = result.data.map(function (client) {\n                    client[\"client_secret\"] = client.client_uri.split(\"sec=\")[1];\n                    return client;\n                  }); //map to make prettier\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initialize() {\n        return _initialize.apply(this, arguments);\n      }\n\n      return initialize;\n    }(),\n    rotateSecret: function () {\n      var _rotateSecret = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(item) {\n        var accessToken;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$auth.getAccessToken();\n\n              case 2:\n                accessToken = _context2.sent;\n                this.$http.post(\"http://localhost:8000/newSecret\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  client: item\n                }).then(function (result) {\n                  component.close();\n                  component.initialize();\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function rotateSecret(_x) {\n        return _rotateSecret.apply(this, arguments);\n      }\n\n      return rotateSecret;\n    }(),\n    addScope: function () {\n      var _addScope = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(item) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!this.user_scopes.includes(item)) {\n                  this.user_scopes = this.user_scopes + \" \" + item;\n                }\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function addScope(_x2) {\n        return _addScope.apply(this, arguments);\n      }\n\n      return addScope;\n    }(),\n    removeScope: function () {\n      var _removeScope = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(item) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (this.user_scopes.includes(\" \" + item)) {\n                  this.user_scopes = this.user_scopes.replace(\" \" + item, '');\n                }\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function removeScope(_x3) {\n        return _removeScope.apply(this, arguments);\n      }\n\n      return removeScope;\n    }(),\n    getScopes: function () {\n      var _getScopes = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(item) {\n        var component, accessToken, accessTokenobj, baseURI;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                component = this;\n                _context5.next = 3;\n                return this.$auth.getAccessToken();\n\n              case 3:\n                accessToken = _context5.sent;\n                accessTokenobj = {\n                  accessToken: accessToken\n                };\n                baseURI = \"http://localhost:8000/scopes\";\n                this.$http.get(baseURI, {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  }\n                }).then(function (result) {\n                  console.log(result);\n                  component.items = result.data;\n                });\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getScopes(_x4) {\n        return _getScopes.apply(this, arguments);\n      }\n\n      return getScopes;\n    }(),\n    viewItem: function viewItem(item) {\n      this.user_scopes = \"openid email profile\";\n      this.editedIndex = this.clients.indexOf(item);\n      this.viewedItem = Object.assign({}, item);\n      this.baseEncode = btoa(this.viewedItem.client_id + \":\" + this.viewedItem.client_secret);\n      this.getScopes(this.viewedItem);\n      this.dialog = true;\n    },\n    createUserGrant: function createUserGrant(item) {\n      this.editedIndex = this.clients.indexOf(item);\n      this.viewedItem = Object.assign({}, item);\n      this.userField = true;\n      this.dialog = true;\n    },\n    deleteItem: function () {\n      var _deleteItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(item) {\n        var component, user, accessToken;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                component = this;\n                _context6.next = 3;\n                return this.$auth.getUser();\n\n              case 3:\n                user = _context6.sent;\n                _context6.next = 6;\n                return this.$auth.getAccessToken();\n\n              case 6:\n                accessToken = _context6.sent;\n                this.$http.delete(\"http://localhost:8000/oauthClient\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  data: {\n                    client: item\n                  }\n                }).then(function (result) {\n                  component.initialize();\n                });\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function deleteItem(_x5) {\n        return _deleteItem.apply(this, arguments);\n      }\n\n      return deleteItem;\n    }(),\n    close: function close() {\n      var _this2 = this;\n\n      this.dialog = false;\n      this.userField = false;\n      setTimeout(function () {\n        _this2.viewedItem = Object.assign({}, _this2.defaultItem);\n        _this2.editedIndex = -1;\n      }, 300);\n    },\n    logout: function () {\n      var _logout = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.$auth.logout();\n\n              case 2:\n                _context7.next = 4;\n                return this.$auth.isAuthenticated();\n\n              case 4:\n                // Navigate back to home\n                window.location.reload();\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }(),\n    save: function () {\n      var _save = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n        var component, user, accessToken;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                component = this;\n\n                if (!(component.userField && component.new_client_name)) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                component.savePkce();\n                _context8.next = 12;\n                break;\n\n              case 5:\n                _context8.next = 7;\n                return this.$auth.getUser();\n\n              case 7:\n                user = _context8.sent;\n                _context8.next = 10;\n                return this.$auth.getAccessToken();\n\n              case 10:\n                accessToken = _context8.sent;\n                this.$http.post(\"http://localhost:8000/developer-app\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  user: user\n                }).then(function (result) {\n                  component.close();\n                  component.initialize();\n                });\n\n              case 12:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function save() {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }(),\n    savePkce: function () {\n      var _savePkce = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        var component, name, user, tos, policy, accessToken;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                component = this;\n                name = component.new_client_name;\n                _context9.next = 4;\n                return this.$auth.getUser();\n\n              case 4:\n                user = _context9.sent;\n                tos = component.terms_url;\n                policy = component.policy_url;\n                _context9.next = 9;\n                return this.$auth.getAccessToken();\n\n              case 9:\n                accessToken = _context9.sent;\n                this.$http.post(\"http://localhost:8000/developer-pkce-app\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  user: user,\n                  name: name,\n                  tos: tos,\n                  policy: policy\n                }).then(function (result) {\n                  component.userField = false;\n                  component.close();\n                  component.initialize();\n                });\n\n              case 11:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function savePkce() {\n        return _savePkce.apply(this, arguments);\n      }\n\n      return savePkce;\n    }()\n  }\n};",{"version":3,"sources":["Developer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<v-data-table :headers=\"headers\" :items=\"clients\" sort-by=\"client_id\" class=\"elevation-1\">\n    <template v-slot:top>\n        <v-toolbar flat color=\"white\">\n            <v-toolbar-title>Developer Dashboard</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-toolbar-title>Welcome, <span v-model=\"user\">{{user}}</span></v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-btn color=\"primary\" dark class=\"mb-2\" @click=\"save\">New Service Oauth App</v-btn>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-btn color=\"primary\" dark class=\"mb-2\" @click=\"createUserGrant\">New User Grant Oauth App</v-btn>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-btn color=\"primary\" dark class=\"mb-2\" @click=\"logout\">Logout</v-btn>\n            <v-dialog v-model=\"dialog\" max-width=\"800px\">\n                <v-card>\n                    <v-card-title>\n                        <span class=\"headline\">{{ formTitle }}</span>\n                    </v-card-title>\n\n                    <v-card-text>\n                        <v-container>\n                            <v-row v-if=\"userField\">\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"new_client_name\" label=\"client client_name\"></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"logo_url\" label=\"url for logo\"></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"terms_url\" label=\"url for terms\"></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"policy_url\" label=\"url for policy\"></v-text-field>\n                                </v-col>\n                            </v-row>\n                            <v-row v-else>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"viewedItem.client_name\" label=\"client client_name\"></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field v-model=\"viewedItem.client_id\" label=\"client_id\"></v-text-field>\n                                </v-col>\n                                <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                                    <v-text-field label=\"client_secret\" v-model=\"viewedItem.client_secret\" :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\" :type=\"show1 ? 'text' : 'password'\" name=\"input-10-1\" counter @click:append=\"show1 = !show1\"></v-text-field>\n                                </v-col>\n                            </v-row>\n                        </v-container>\n                    </v-card-text>\n                    <v-expansion-panel>\n                        <v-card max-width=\"800\" max-height=\"200\" class=\"mx-auto scroll\">\n                            <v-toolbar color=\"primary\" dark>\n                                <v-toolbar-title>Available Scopes</v-toolbar-title>\n                                <v-spacer></v-spacer>\n                            </v-toolbar>\n                            <v-list>\n                                <v-list-item v-for=\"item in items\" :key=\"item.title\" @click=\"\">\n                                    <v-list-item-content>\n                                        <v-list-item-title>Scope Name: {{item.name}}</v-list-item-title>\n                                    </v-list-item-content>\n                                    <v-list-item-content>\n                                        <v-list-item-title>description: {{item.description}}</v-list-item-title>\n                                    </v-list-item-content>\n                                    <v-list-item-content>\n                                        <v-list-item-title>Consent: {{item.consent}}</v-list-item-title>\n                                    </v-list-item-content>\n                                    <v-list-item-content>\n                                        <v-list-item-title>Openid Scope: {{item.system}}</v-list-item-title>\n                                    </v-list-item-content>\n                                    <v-list-item-content>\n                                        <v-list-item-title>Part of Request: {{user_scopes.includes(item.name)}}</v-list-item-title>\n                                    </v-list-item-content>\n\n                                    <v-list-item-icon>\n                                        <v-icon color=\"primary\" @click=\"addScope(item.name)\" v-if=\"!user_scopes.includes(item.name)\">mdi-plus</v-icon>\n                                          <v-icon color=\"primary\" @click=\"removeScope(item.name)\" v-else-if=\"user_scopes.includes(item.name)\">mdi-minus</v-icon>\n                                    </v-list-item-icon>\n                                </v-list-item>\n                            </v-list>\n                        </v-card>\n                    </v-expansion-panel>\n                    <v-card v-if=\"!viewedItem.client_secret\">\n                        <br>\n                        <div class=\"d-block pa-2 black white--text\">\n                            <h3>Run command below</h3>\n                            npm i dev-dash-cli-okta -g && say-hello --OKTA_ORG_URL={{okta_issuer}} --OKTA_CLIENT_ID={{viewedItem.client_id}} --OKTA_REDIRECT_PORT=4000 --OKTA_SCOPES={{user_scopes}}\n                        </div>\n                        <br>\n                    </v-card>\n                    <v-card v-else>\n                        <br>\n                        <div class=\"d-block pa-2 black white--text\">\n                            <h3>Run command below</h3>\n                            curl --location --request POST '{{okta_issuer}}/v1/token' \\<br>\n                            --header 'Authorization: Basic {{baseEncode}}' \\<br>\n                            --header 'Content-Type: application/x-www-form-urlencoded' \\<br>\n                            --data-urlencode 'grant_type=client_credentials' \\<br>\n                            --data-urlencode 'scope=openid email profile'\n                        </div>\n                        <br>\n                    </v-card>\n                    <v-card-actions>\n                        <v-spacer></v-spacer>\n                        <v-btn color=\"blue darken-1\" text @click=\"close\">Close</v-btn>\n                        <v-btn color=\"blue darken-1\" text @click=\"save\">Save</v-btn>\n                    </v-card-actions>\n                </v-card>\n            </v-dialog>\n        </v-toolbar>\n    </template>\n    <template v-slot:item.action=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"viewItem(item)\">\n            mdi-eye\n        </v-icon>\n        <v-icon small @click=\"deleteItem(item)\">\n            mdi-delete\n        </v-icon>\n    </template>\n    <template v-slot:no-data>\n        <v-btn color=\"primary\" @click=\"initialize\">Reset</v-btn>\n    </template>\n</v-data-table>\n</template>\n\n<script>\nexport default {\n    client_name: \"Developer\",\n    data: () => ({\n        show1: false,\n        dialog: false,\n        new_client_name: \"\",\n        policy_url: \"\",\n        terms_url: \"\",\n        okta_issuer: \"\",\n        userField: false,\n        baseEncode: \"\",\n        user_scopes: \"openid email profile\",\n        items: [{\n            consent: \"IMPLICIT\",\n            default: false,\n            description: null,\n            id: \"scpjeez3czmycNAvE0h7\",\n            metadataPublish: \"NO_CLIENTS\",\n            name: \"Admin\",\n            system: false\n        }],\n        clientCredsScopes: \"\",\n        user: \"\",\n        headers: [{\n                text: 'Oauth Clients',\n                align: 'start',\n                sortable: false,\n                value: 'client_name',\n            },\n            {\n                text: 'client_id',\n                value: 'client_id'\n            },\n            {\n                text: 'Actions',\n                value: 'action',\n                sortable: false\n            },\n        ],\n        clients: [],\n        editedIndex: -1,\n        viewedItem: {\n            client_name: '',\n            client_id: 0,\n            client_secret: 0,\n        },\n        defaultItem: {\n            client_name: '',\n            client_id: 0,\n        },\n    }),\n\n    computed: {\n        formTitle() {\n            return this.editedIndex === -1 ? 'New Oauth App' : 'View Oauth Client'\n        },\n    },\n\n    watch: {\n        dialog(val) {\n            val || this.close()\n        },\n    },\n\n    created() {\n        this.initialize()\n        console.log(process.env.VUE_APP_OKTA_ISSUER)\n        this.okta_issuer = process.env.VUE_APP_OKTA_ISSUER\n    },\n\n    methods: {\n        async initialize() {\n            var component = this\n            var user = await this.$auth.getUser()\n            var accessToken = await this.$auth.getAccessToken();\n            const accessTokenobj = {\n                accessToken\n            }\n            this.user = user.preferred_username\n\n            const baseURI = \"http://localhost:8000/developer-apps?user=\" + user.preferred_username;\n            this.$http.get(baseURI, {\n                headers: {\n                    'Authorization': `${accessToken}`\n                }\n            }).then((result) => {\n                this.clients = result.data.map(function (client) {\n                    client[\"client_secret\"] = client.client_uri.split(\"sec=\")[1]\n                    return client\n                })\n                //map to make prettier\n            })\n        },\n        async rotateSecret(item) {\n            var accessToken = await this.$auth.getAccessToken();\n\n            this.$http.post(\"http://localhost:8000/newSecret\", {\n                headers: {\n                    'Authorization': `${accessToken}`\n                },\n                client: item\n            }).then((result) => {\n                component.close()\n                component.initialize()\n            })\n\n        },\n        async addScope(item) {\n            if (!this.user_scopes.includes(item)) {\n                this.user_scopes = this.user_scopes + \" \" + item\n            }\n        },\n        async removeScope(item) {\n            if (this.user_scopes.includes(\" \" + item)) {\n                this.user_scopes = this.user_scopes.replace(\" \" + item, '')\n            }\n        },\n        async getScopes(item) {\n            var component = this\n            var accessToken = await this.$auth.getAccessToken();\n            const accessTokenobj = {\n                accessToken\n            }\n            const baseURI = \"http://localhost:8000/scopes\"\n            this.$http.get(baseURI, {\n                headers: {\n                    'Authorization': `${accessToken}`\n                }\n            }).then((result) => {\n                console.log(result)\n                component.items = result.data\n            })\n        },\n        viewItem(item) {\n            this.user_scopes = \"openid email profile\"\n            this.editedIndex = this.clients.indexOf(item)\n            this.viewedItem = Object.assign({}, item)\n            this.baseEncode = btoa(this.viewedItem.client_id + \":\" + this.viewedItem.client_secret)\n            this.getScopes(this.viewedItem)\n            this.dialog = true\n        },\n        createUserGrant(item) {\n            this.editedIndex = this.clients.indexOf(item)\n            this.viewedItem = Object.assign({}, item)\n            this.userField = true\n            this.dialog = true\n        },\n        async deleteItem(item) {\n            var component = this\n            var user = await this.$auth.getUser()\n            var accessToken = await this.$auth.getAccessToken();\n            this.$http.delete(\"http://localhost:8000/oauthClient\", {\n                headers: {\n                    'Authorization': `${accessToken}`\n                },\n                data: {\n                    client: item\n                }\n            }).then((result) => {\n                component.initialize()\n            })\n        },\n        close() {\n            this.dialog = false\n            this.userField = false\n            setTimeout(() => {\n                this.viewedItem = Object.assign({}, this.defaultItem)\n                this.editedIndex = -1\n            }, 300)\n        },\n        async logout() {\n            await this.$auth.logout()\n            await this.$auth.isAuthenticated()\n\n            // Navigate back to home\n            window.location.reload()\n        },\n        async save() {\n            var component = this\n            if (component.userField && component.new_client_name) {\n                component.savePkce()\n            } else {\n                var user = await this.$auth.getUser()\n                var accessToken = await this.$auth.getAccessToken()\n                this.$http.post(\"http://localhost:8000/developer-app\", {\n                    headers: {\n                        'Authorization': `${accessToken}`\n                    },\n                    user: user\n                }).then((result) => {\n                    component.close()\n                    component.initialize()\n                })\n            }\n        },\n        async savePkce() {\n            var component = this\n            var name = component.new_client_name\n            var user = await this.$auth.getUser()\n            var tos = component.terms_url\n            var policy = component.policy_url\n            var accessToken = await this.$auth.getAccessToken()\n            this.$http.post(\"http://localhost:8000/developer-pkce-app\", {\n                headers: {\n                    'Authorization': `${accessToken}`\n                },\n                user: user,\n                name: name,\n                tos: tos,\n                policy: policy\n            }).then((result) => {\n                component.userField = false\n                component.close()\n                component.initialize()\n            })\n        },\n    },\n}\n</script>\n\n<style>\n.scroll {\n    overflow-y: auto;\n}\n</style>\n"],"sourceRoot":"src/views"}]}