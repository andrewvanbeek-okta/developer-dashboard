{"remainingRequest":"/Users/maxpollard/developer-dashboard/node_modules/babel-loader/lib/index.js!/Users/maxpollard/developer-dashboard/node_modules/eslint-loader/index.js??ref--13-0!/Users/maxpollard/developer-dashboard/src/router.js","dependencies":[{"path":"/Users/maxpollard/developer-dashboard/src/router.js","mtime":1591027636516},{"path":"/Users/maxpollard/developer-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maxpollard/developer-dashboard/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/maxpollard/developer-dashboard/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/maxpollard/developer-dashboard/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from \"./views/Home.vue\";\nimport Login from \"./views/Login\";\nimport Developer from \"./views/Developer.vue\";\nimport Auth from '@okta/okta-vue';\nVue.use(Router);\nVue.use(Auth, {\n  issuer: process.env.VUE_APP_OKTA_ISSUER,\n  client_id: process.env.VUE_APP_OKTA_CLIENT_ID,\n  redirect_uri: \"http://localhost:8080/implicit/callback\",\n  scope: 'openid profile email',\n  pkce: true\n});\nvar router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [{\n    path: '/',\n    name: 'developer',\n    component: Developer,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/login',\n    component: Login\n  }, {\n    path: '/developer',\n    name: 'developer',\n    component: Developer,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: '/implicit/callback',\n    component: Auth.handleCallback()\n  }, {\n    path: '/about',\n    name: 'about',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: function component() {\n      return import(\n      /* webpackChunkName: \"about\" */\n      \"./views/About.vue\");\n    }\n  }]\n});\n\nvar onAuthRequired = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(from, to, next) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = from.matched.some(function (record) {\n              return record.meta.requiresAuth;\n            });\n\n            if (!_context.t0) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 4;\n            return Vue.prototype.$auth.isAuthenticated();\n\n          case 4:\n            _context.t0 = !_context.sent;\n\n          case 5:\n            if (!_context.t0) {\n              _context.next = 9;\n              break;\n            }\n\n            // Navigate to custom login page\n            next({\n              path: '/login'\n            }); //<--- And set the sate here as well \n\n            _context.next = 10;\n            break;\n\n          case 9:\n            next();\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function onAuthRequired(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nrouter.beforeEach(onAuthRequired);\nexport default router;",{"version":3,"sources":["/Users/maxpollard/developer-dashboard/src/router.js"],"names":["Vue","Router","Home","Login","Developer","Auth","use","issuer","process","env","VUE_APP_OKTA_ISSUER","client_id","VUE_APP_OKTA_CLIENT_ID","redirect_uri","scope","pkce","router","mode","base","BASE_URL","routes","path","name","component","meta","requiresAuth","handleCallback","onAuthRequired","from","to","next","matched","some","record","prototype","$auth","isAuthenticated","beforeEach"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,IAAP;AACA,OAAOC,KAAP;AACA,OAAOC,SAAP;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AAEAL,GAAG,CAACM,GAAJ,CAAQL,MAAR;AAEAD,GAAG,CAACM,GAAJ,CAAQD,IAAR,EAAc;AACZE,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADR;AAEZC,EAAAA,SAAS,EAAEH,OAAO,CAACC,GAAR,CAAYG,sBAFX;AAGZC,EAAAA,YAAY,EAAE,yCAHF;AAIZC,EAAAA,KAAK,EAAE,sBAJK;AAKZC,EAAAA,IAAI,EAAE;AALM,CAAd;AAQA,IAAIC,MAAM,GAAG,IAAIf,MAAJ,CAAW;AACtBgB,EAAAA,IAAI,EAAE,SADgB;AAEtBC,EAAAA,IAAI,EAAEV,OAAO,CAACC,GAAR,CAAYU,QAFI;AAGtBC,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,IAAI,EAAE,GADR;AAEEC,IAAAA,IAAI,EAAE,WAFR;AAGEC,IAAAA,SAAS,EAAEnB,SAHb;AAIEoB,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GADM,EASN;AACEJ,IAAAA,IAAI,EAAE,QADR;AAEEE,IAAAA,SAAS,EAAEpB;AAFb,GATM,EAaN;AACEkB,IAAAA,IAAI,EAAE,YADR;AAEEC,IAAAA,IAAI,EAAE,WAFR;AAGEC,IAAAA,SAAS,EAAEnB,SAHb;AAIEoB,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GAbM,EAqBN;AACEJ,IAAAA,IAAI,EAAE,oBADR;AAEEE,IAAAA,SAAS,EAAElB,IAAI,CAACqB,cAAL;AAFb,GArBM,EAyBN;AACEL,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,IAAI,EAAE,OAFR;AAGE;AACA;AACA;AACAC,IAAAA,SAAS,EAAE;AAAA,aAAM;AAAO;AAAP,0BAAN;AAAA;AANb,GAzBM;AAHc,CAAX,CAAb;;AAuCA,IAAMI,cAAc;AAAA,qEAAG,iBAAOC,IAAP,EAAaC,EAAb,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA,0BACjBF,IAAI,CAACG,OAAL,CAAaC,IAAb,CAAkB,UAAAC,MAAM;AAAA,qBAAIA,MAAM,CAACT,IAAP,CAAYC,YAAhB;AAAA,aAAxB,CADiB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBACgDzB,GAAG,CAACkC,SAAJ,CAAcC,KAAd,CAAoBC,eAApB,EADhD;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEnB;AACAN,YAAAA,IAAI,CAAC;AAAET,cAAAA,IAAI,EAAE;AAAR,aAAD,CAAJ,CAHmB,CAGM;;AAHN;AAAA;;AAAA;AAKnBS,YAAAA,IAAI;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAdH,cAAc;AAAA;AAAA;AAAA,GAApB;;AASAX,MAAM,CAACqB,UAAP,CAAkBV,cAAlB;AAEA,eAAeX,MAAf","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from './views/Home.vue'\nimport Login from './views/Login'\nimport Developer from './views/Developer.vue'\nimport Auth from '@okta/okta-vue'\n\nVue.use(Router)\n\nVue.use(Auth, {\n  issuer: process.env.VUE_APP_OKTA_ISSUER,\n  client_id: process.env.VUE_APP_OKTA_CLIENT_ID,\n  redirect_uri: \"http://localhost:8080/implicit/callback\",\n  scope: 'openid profile email',\n  pkce: true\n})\n\nvar router = new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: '/',\n      name: 'developer',\n      component: Developer,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: '/login',\n      component: Login\n    },\n    {\n      path: '/developer',\n      name: 'developer',\n      component: Developer,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: '/implicit/callback',\n      component: Auth.handleCallback()\n    },\n    {\n      path: '/about',\n      name: 'about',\n      // route level code-splitting\n      // this generates a separate chunk (about.[hash].js) for this route\n      // which is lazy-loaded when the route is visited.\n      component: () => import(/* webpackChunkName: \"about\" */ './views/About.vue')\n    }\n  ]\n})\n\nconst onAuthRequired = async (from, to, next) => {\n  if (from.matched.some(record => record.meta.requiresAuth) && !(await Vue.prototype.$auth.isAuthenticated())) {\n    // Navigate to custom login page\n    next({ path: '/login' }) //<--- And set the sate here as well \n  } else {\n    next()\n  }\n}\n\nrouter.beforeEach(onAuthRequired)\n\nexport default router\n"]}]}