{"remainingRequest":"/Users/andrewvanbeek/opa-dev-dash/node_modules/babel-loader/lib/index.js!/Users/andrewvanbeek/opa-dev-dash/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/andrewvanbeek/opa-dev-dash/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/andrewvanbeek/opa-dev-dash/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/andrewvanbeek/opa-dev-dash/src/views/Opa.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/andrewvanbeek/opa-dev-dash/src/views/Opa.vue","mtime":1592890817800},{"path":"/Users/andrewvanbeek/opa-dev-dash/node_modules/cache-loader/dist/cjs.js","mtime":1592873611678},{"path":"/Users/andrewvanbeek/opa-dev-dash/node_modules/babel-loader/lib/index.js","mtime":1592873611535},{"path":"/Users/andrewvanbeek/opa-dev-dash/node_modules/vuetify-loader/lib/loader.js","mtime":1592873617526},{"path":"/Users/andrewvanbeek/opa-dev-dash/node_modules/cache-loader/dist/cjs.js","mtime":1592873611678},{"path":"/Users/andrewvanbeek/opa-dev-dash/node_modules/vue-loader/lib/index.js","mtime":1592873617424}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/andrewvanbeek/opa-dev-dash/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  client_name: \"Developer\",\n  data: function data() {\n    return {\n      opaText: \"\",\n      regoFragements: [],\n      show1: false,\n      dialog: false,\n      new_client_name: \"\",\n      policy_url: \"\",\n      terms_url: \"\",\n      okta_issuer: \"\",\n      userField: false,\n      baseEncode: \"\",\n      user_scopes: \"openid email profile\",\n      items: [{\n        consent: \"IMPLICIT\",\n        default: false,\n        description: null,\n        id: \"scpjeez3czmycNAvE0h7\",\n        metadataPublish: \"NO_CLIENTS\",\n        name: \"Admin\",\n        system: false\n      }],\n      client_creds_scopes: \"\",\n      user: \"\",\n      headers: [{\n        text: 'Oauth Clients',\n        align: 'start',\n        sortable: false,\n        value: 'client_name'\n      }, {\n        text: 'client_id',\n        value: 'client_id'\n      }, {\n        text: 'Actions',\n        value: 'action',\n        sortable: false\n      }],\n      clients: [],\n      editedIndex: -1,\n      viewedItem: {\n        client_name: '',\n        client_id: 0,\n        client_secret: 0\n      },\n      defaultItem: {\n        client_name: '',\n        client_id: 0\n      }\n    };\n  },\n  computed: {\n    formTitle: function formTitle() {\n      return this.editedIndex === -1 ? 'New Oauth App' : 'View Oauth Client';\n    }\n  },\n  watch: {\n    dialog: function dialog(val) {\n      val || this.close();\n    }\n  },\n  created: function created() {\n    this.initialize();\n    this.sendToOpa();\n    console.log(process.env.VUE_APP_OKTA_ISSUER);\n    this.okta_issuer = process.env.VUE_APP_OKTA_ISSUER;\n  },\n  methods: {\n    initialize: function () {\n      var _initialize = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var component, user, accessToken, accessTokenobj, baseURI, opa;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                component = this;\n                _context.next = 3;\n                return this.$auth.getUser();\n\n              case 3:\n                user = _context.sent;\n                _context.next = 6;\n                return this.$auth.getAccessToken();\n\n              case 6:\n                accessToken = _context.sent;\n                accessTokenobj = {\n                  accessToken: accessToken\n                };\n                this.user = user.preferred_username;\n                baseURI = \"http://localhost:8000/opa\";\n                _context.next = 12;\n                return this.$http.get(baseURI);\n\n              case 12:\n                opa = _context.sent;\n                this.regoFragements = opa.data.rego.split(\"\\n\");\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initialize() {\n        return _initialize.apply(this, arguments);\n      }\n\n      return initialize;\n    }(),\n    rotateSecret: function () {\n      var _rotateSecret = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(item) {\n        var accessToken;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.$auth.getAccessToken();\n\n              case 2:\n                accessToken = _context2.sent;\n                this.$http.post(\"http://localhost:8000/newSecret\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  client: item\n                }).then(function (result) {\n                  component.close();\n                  component.initialize();\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function rotateSecret(_x) {\n        return _rotateSecret.apply(this, arguments);\n      }\n\n      return rotateSecret;\n    }(),\n    sendToOpa: function () {\n      var _sendToOpa = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var data, opa;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                data = new FormData();\n                data.set('file', \"http://localhost:8080/test.rego\");\n                _context3.next = 4;\n                return this.$http.post('http://localhost:8181/v1/policies', data);\n\n              case 4:\n                opa = _context3.sent;\n                console.log(opa);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function sendToOpa() {\n        return _sendToOpa.apply(this, arguments);\n      }\n\n      return sendToOpa;\n    }(),\n    addScope: function () {\n      var _addScope = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(item) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!this.user_scopes.includes(item)) {\n                  this.user_scopes = this.user_scopes + \" \" + item;\n                }\n\n                if (!this.client_creds_scopes.includes(item)) {\n                  this.client_creds_scopes = this.client_creds_scopes + \" \" + item;\n                }\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function addScope(_x2) {\n        return _addScope.apply(this, arguments);\n      }\n\n      return addScope;\n    }(),\n    removeScope: function () {\n      var _removeScope = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(item) {\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.user_scopes.includes(\" \" + item)) {\n                  this.user_scopes = this.user_scopes.replace(\" \" + item, '');\n                }\n\n                if (this.client_creds_scopes.includes(\" \" + item)) {\n                  this.client_creds_scopes = this.client_creds_scopes.replace(\" \" + item, '');\n                }\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function removeScope(_x3) {\n        return _removeScope.apply(this, arguments);\n      }\n\n      return removeScope;\n    }(),\n    getScopes: function () {\n      var _getScopes = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(item) {\n        var component, accessToken, accessTokenobj, baseURI;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                component = this;\n                _context6.next = 3;\n                return this.$auth.getAccessToken();\n\n              case 3:\n                accessToken = _context6.sent;\n                accessTokenobj = {\n                  accessToken: accessToken\n                };\n                baseURI = \"http://localhost:8000/scopes\";\n                this.$http.get(baseURI, {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  }\n                }).then(function (result) {\n                  console.log(result);\n                  component.items = result.data;\n                });\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getScopes(_x4) {\n        return _getScopes.apply(this, arguments);\n      }\n\n      return getScopes;\n    }(),\n    viewItem: function viewItem(item) {\n      this.user_scopes = \"openid email profile\";\n      this.editedIndex = this.clients.indexOf(item);\n      this.viewedItem = Object.assign({}, item);\n      this.baseEncode = btoa(this.viewedItem.client_id + \":\" + this.viewedItem.client_secret);\n      this.getScopes(this.viewedItem);\n      this.dialog = true;\n    },\n    createUserGrant: function createUserGrant(item) {\n      this.editedIndex = this.clients.indexOf(item);\n      this.viewedItem = Object.assign({}, item);\n      this.userField = true;\n      this.dialog = true;\n    },\n    deleteItem: function () {\n      var _deleteItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(item) {\n        var component, user, accessToken;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                component = this;\n                _context7.next = 3;\n                return this.$auth.getUser();\n\n              case 3:\n                user = _context7.sent;\n                _context7.next = 6;\n                return this.$auth.getAccessToken();\n\n              case 6:\n                accessToken = _context7.sent;\n                this.$http.delete(\"http://localhost:8000/oauthClient\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  data: {\n                    client: item\n                  }\n                }).then(function (result) {\n                  component.initialize();\n                });\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function deleteItem(_x5) {\n        return _deleteItem.apply(this, arguments);\n      }\n\n      return deleteItem;\n    }(),\n    close: function close() {\n      var _this = this;\n\n      this.dialog = false;\n      this.userField = false;\n      setTimeout(function () {\n        _this.viewedItem = Object.assign({}, _this.defaultItem);\n        _this.editedIndex = -1;\n      }, 300);\n    },\n    logout: function () {\n      var _logout = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return this.$auth.logout();\n\n              case 2:\n                _context8.next = 4;\n                return this.$auth.isAuthenticated();\n\n              case 4:\n                // Navigate back to home\n                window.location.reload();\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }(),\n    save: function () {\n      var _save = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        var component, user, accessToken;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                component = this;\n\n                if (!(component.userField && component.new_client_name)) {\n                  _context9.next = 5;\n                  break;\n                }\n\n                component.savePkce();\n                _context9.next = 12;\n                break;\n\n              case 5:\n                _context9.next = 7;\n                return this.$auth.getUser();\n\n              case 7:\n                user = _context9.sent;\n                _context9.next = 10;\n                return this.$auth.getAccessToken();\n\n              case 10:\n                accessToken = _context9.sent;\n                this.$http.post(\"http://localhost:8000/developer-app\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  user: user\n                }).then(function (result) {\n                  component.close();\n                  component.initialize();\n                });\n\n              case 12:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function save() {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }(),\n    savePkce: function () {\n      var _savePkce = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {\n        var component, name, user, tos, policy, accessToken;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                component = this;\n                name = component.new_client_name;\n                _context10.next = 4;\n                return this.$auth.getUser();\n\n              case 4:\n                user = _context10.sent;\n                tos = component.terms_url;\n                policy = component.policy_url;\n                _context10.next = 9;\n                return this.$auth.getAccessToken();\n\n              case 9:\n                accessToken = _context10.sent;\n                this.$http.post(\"http://localhost:8000/developer-pkce-app\", {\n                  headers: {\n                    'Authorization': \"\".concat(accessToken)\n                  },\n                  user: user,\n                  name: name,\n                  tos: tos,\n                  policy: policy\n                }).then(function (result) {\n                  component.userField = false;\n                  component.close();\n                  component.initialize();\n                });\n\n              case 11:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function savePkce() {\n        return _savePkce.apply(this, arguments);\n      }\n\n      return savePkce;\n    }()\n  }\n};",{"version":3,"sources":["Opa.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"d-block pa-2 black white--text\">\n      <h3>Run command below</h3>\n      <p v-for=\"fragment in regoFragements\">{{fragment}}<br></p>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  client_name: \"Developer\",\n  data: () => ({\n    opaText: \"\",\n    regoFragements: [],\n    show1: false,\n    dialog: false,\n    new_client_name: \"\",\n    policy_url: \"\",\n    terms_url: \"\",\n    okta_issuer: \"\",\n    userField: false,\n    baseEncode: \"\",\n    user_scopes: \"openid email profile\",\n    items: [{\n      consent: \"IMPLICIT\",\n      default: false,\n      description: null,\n      id: \"scpjeez3czmycNAvE0h7\",\n      metadataPublish: \"NO_CLIENTS\",\n      name: \"Admin\",\n      system: false\n    }],\n    client_creds_scopes: \"\",\n    user: \"\",\n    headers: [{\n      text: 'Oauth Clients',\n      align: 'start',\n      sortable: false,\n      value: 'client_name',\n    },\n    {\n      text: 'client_id',\n      value: 'client_id'\n    },\n    {\n      text: 'Actions',\n      value: 'action',\n      sortable: false\n    },\n  ],\n  clients: [],\n  editedIndex: -1,\n  viewedItem: {\n    client_name: '',\n    client_id: 0,\n    client_secret: 0,\n  },\n  defaultItem: {\n    client_name: '',\n    client_id: 0,\n  },\n}),\n\ncomputed: {\n  formTitle() {\n    return this.editedIndex === -1 ? 'New Oauth App' : 'View Oauth Client'\n  },\n},\n\nwatch: {\n  dialog(val) {\n    val || this.close()\n  },\n},\n\ncreated() {\n  this.initialize()\n  this.sendToOpa()\n  console.log(process.env.VUE_APP_OKTA_ISSUER)\n  this.okta_issuer = process.env.VUE_APP_OKTA_ISSUER\n},\n\nmethods: {\n  async initialize() {\n    var component = this\n    var user = await this.$auth.getUser()\n    var accessToken = await this.$auth.getAccessToken();\n    const accessTokenobj = {\n      accessToken\n    }\n    this.user = user.preferred_username\n    const baseURI = \"http://localhost:8000/opa\"\n    var opa = await this.$http.get(baseURI)\n    this.regoFragements = opa.data.rego.split(\"\\n\")\n  },\n  async rotateSecret(item) {\n    var accessToken = await this.$auth.getAccessToken();\n\n    this.$http.post(\"http://localhost:8000/newSecret\", {\n      headers: {\n        'Authorization': `${accessToken}`\n      },\n      client: item\n    }).then((result) => {\n      component.close()\n      component.initialize()\n    })\n\n  },\n  async sendToOpa() {\n    let data = new FormData()\n    data.set('file', \"http://localhost:8080/test.rego\")\n    var opa = await this.$http.post('http://localhost:8181/v1/policies', data)\n    console.log(opa)\n  },\n  async addScope(item) {\n    if (!this.user_scopes.includes(item)) {\n      this.user_scopes = this.user_scopes + \" \" + item\n    }\n    if (!this.client_creds_scopes.includes(item)) {\n      this.client_creds_scopes = this.client_creds_scopes + \" \" + item\n    }\n  },\n  async removeScope(item) {\n    if (this.user_scopes.includes(\" \" + item)) {\n      this.user_scopes = this.user_scopes.replace(\" \" + item, '')\n    }\n\n    if(this.client_creds_scopes.includes(\" \" + item)) {\n      this.client_creds_scopes = this.client_creds_scopes.replace(\" \" + item, '')\n    }\n  },\n  async getScopes(item) {\n    var component = this\n    var accessToken = await this.$auth.getAccessToken();\n    const accessTokenobj = {\n      accessToken\n    }\n    const baseURI = \"http://localhost:8000/scopes\"\n    this.$http.get(baseURI, {\n      headers: {\n        'Authorization': `${accessToken}`\n      }\n    }).then((result) => {\n      console.log(result)\n      component.items = result.data\n    })\n  },\n  viewItem(item) {\n    this.user_scopes = \"openid email profile\"\n    this.editedIndex = this.clients.indexOf(item)\n    this.viewedItem = Object.assign({}, item)\n    this.baseEncode = btoa(this.viewedItem.client_id + \":\" + this.viewedItem.client_secret)\n    this.getScopes(this.viewedItem)\n    this.dialog = true\n  },\n  createUserGrant(item) {\n    this.editedIndex = this.clients.indexOf(item)\n    this.viewedItem = Object.assign({}, item)\n    this.userField = true\n    this.dialog = true\n  },\n  async deleteItem(item) {\n    var component = this\n    var user = await this.$auth.getUser()\n    var accessToken = await this.$auth.getAccessToken();\n    this.$http.delete(\"http://localhost:8000/oauthClient\", {\n      headers: {\n        'Authorization': `${accessToken}`\n      },\n      data: {\n        client: item\n      }\n    }).then((result) => {\n      component.initialize()\n    })\n  },\n  close() {\n    this.dialog = false\n    this.userField = false\n    setTimeout(() => {\n      this.viewedItem = Object.assign({}, this.defaultItem)\n      this.editedIndex = -1\n    }, 300)\n  },\n  async logout() {\n    await this.$auth.logout()\n    await this.$auth.isAuthenticated()\n\n    // Navigate back to home\n    window.location.reload()\n  },\n  async save() {\n    var component = this\n    if (component.userField && component.new_client_name) {\n      component.savePkce()\n    } else {\n      var user = await this.$auth.getUser()\n      var accessToken = await this.$auth.getAccessToken()\n      this.$http.post(\"http://localhost:8000/developer-app\", {\n        headers: {\n          'Authorization': `${accessToken}`\n        },\n        user: user\n      }).then((result) => {\n        component.close()\n        component.initialize()\n      })\n    }\n  },\n  async savePkce() {\n    var component = this\n    var name = component.new_client_name\n    var user = await this.$auth.getUser()\n    var tos = component.terms_url\n    var policy = component.policy_url\n    var accessToken = await this.$auth.getAccessToken()\n    this.$http.post(\"http://localhost:8000/developer-pkce-app\", {\n      headers: {\n        'Authorization': `${accessToken}`\n      },\n      user: user,\n      name: name,\n      tos: tos,\n      policy: policy\n    }).then((result) => {\n      component.userField = false\n      component.close()\n      component.initialize()\n    })\n  },\n},\n}\n</script>\n\n<style>\n.scroll {\n  overflow-y: auto;\n}\n</style>\n"],"sourceRoot":"src/views"}]}